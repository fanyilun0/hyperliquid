# Hyperliquid å¤§æˆ·äº¤æ˜“ç›‘æ§ç³»ç»Ÿ - ä½¿ç”¨è¯´æ˜

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æ–‡ä»¶è¯´æ˜](#æ–‡ä»¶è¯´æ˜)
3. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
4. [è¯¦ç»†ä½¿ç”¨](#è¯¦ç»†ä½¿ç”¨)
5. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
7. [é«˜çº§ç”¨æ³•](#é«˜çº§ç”¨æ³•)

---

## ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿå®ç°äº†åŸºäº Hyperliquid å®˜æ–¹ API çš„å¤§æˆ·äº¤æ˜“ç›‘æ§åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š

- âœ… ä»æ’è¡Œæ¦œè‡ªåŠ¨ç­›é€‰æ­£æ”¶ç›Šäº¤æ˜“è€…
- âœ… å®æ—¶ç›‘æ§å¤§æˆ·çš„å¼€ä»“ã€å¹³ä»“ç­‰äº¤æ˜“è¡Œä¸º
- âœ… å‡†ç¡®è¿½è¸ªæŒä»“çŠ¶æ€å˜åŒ–
- âœ… æ”¯æŒå¤šç§é€šçŸ¥æ–¹å¼å’Œè‡ªå®šä¹‰é…ç½®

### æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| åœ°å€ç­›é€‰ | ä» leaderboard.json ç­›é€‰æ­£æ”¶ç›Šå‰ N å |
| å®æ—¶ç›‘æ§ | é€šè¿‡ WebSocket ç›‘å¬äº¤æ˜“äº‹ä»¶ |
| çŠ¶æ€è¿½è¸ª | ç»´æŠ¤æ¯ä¸ªåœ°å€çš„æŒä»“çŠ¶æ€ |
| è¡Œä¸ºè¯†åˆ« | åŒºåˆ†å¼€ä»“ã€å¹³ä»“ã€åŠ ä»“ã€å‡ä»“ç­‰ |

---

## æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒè„šæœ¬

| æ–‡ä»¶ | åŠŸèƒ½ | ä½¿ç”¨é¢‘ç‡ |
|------|------|---------|
| `filter_top_traders.py` | ç­›é€‰å¤§æˆ·åœ°å€ | æ¯æ¬¡æ›´æ–°åœ°å€åˆ—è¡¨ |
| `monitor_whales.py` | åŸºç¡€ç›‘æ§ï¼ˆç®€å•ç‰ˆï¼‰ | æ—¥å¸¸ç›‘æ§ |
| `monitor_whales_v2.py` | é«˜çº§ç›‘æ§ï¼ˆæ”¯æŒé…ç½®ï¼‰ | æ¨èä½¿ç”¨ |

### é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ | æ˜¯å¦å¿…éœ€ |
|------|------|---------|
| `config.json` | ç›‘æ§é…ç½® | å¯é€‰ï¼ˆæœ‰é»˜è®¤å€¼ï¼‰ |
| `leaderboard.json` | æ’è¡Œæ¦œæ•°æ® | å¿…éœ€ |
| `top_traders_addresses.json` | ç­›é€‰ç»“æœ | è‡ªåŠ¨ç”Ÿæˆ |

### è¾…åŠ©æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `requirements.txt` | Python ä¾èµ– |
| `install.sh` | å®‰è£…è„šæœ¬ |
| `start_monitor.sh` | å¯åŠ¨è„šæœ¬ |
| `demo.py` | åŠŸèƒ½æ¼”ç¤º |

### æ–‡æ¡£æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `README.md` | é¡¹ç›®è¯´æ˜ |
| `QUICKSTART.md` | å¿«é€Ÿå¼€å§‹æŒ‡å— |
| `guide.md` | æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£ |
| `ä½¿ç”¨è¯´æ˜.md` | æœ¬æ–‡æ¡£ |

---

## å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆæ¨èæ–°æ‰‹ï¼‰

```bash
# 1. å®‰è£…ä¾èµ–
./install.sh

# 2. å¯åŠ¨ç›‘æ§ï¼ˆä¼šè‡ªåŠ¨ç­›é€‰åœ°å€ï¼‰
./start_monitor.sh
```

### æ–¹æ³•äºŒï¼šåˆ†æ­¥æ‰§è¡Œï¼ˆæ¨èè¿›é˜¶ç”¨æˆ·ï¼‰

```bash
# 1. å®‰è£…ä¾èµ–
pip3 install -r requirements.txt

# 2. ç­›é€‰å¤§æˆ·åœ°å€
python3 filter_top_traders.py

# 3. å¯åŠ¨ç›‘æ§ï¼ˆåŸºç¡€ç‰ˆï¼‰
python3 monitor_whales.py

# æˆ–å¯åŠ¨é«˜çº§ç‰ˆï¼ˆæ”¯æŒé…ç½®æ–‡ä»¶ï¼‰
python3 monitor_whales_v2.py
```

---

## è¯¦ç»†ä½¿ç”¨

### æ­¥éª¤ 1: å‡†å¤‡æ’è¡Œæ¦œæ•°æ®

**é€‰é¡¹ A: ä½¿ç”¨ç°æœ‰æ•°æ®**
å¦‚æœé¡¹ç›®ä¸­å·²æœ‰ `leaderboard.json`ï¼Œå¯ç›´æ¥ä½¿ç”¨ã€‚

**é€‰é¡¹ B: è·å–æœ€æ–°æ•°æ®**
```bash
curl -o leaderboard.json https://stats-data.hyperliquid.xyz/Mainnet/leaderboard
```

**æ•°æ®ç»“æ„ç¤ºä¾‹:**
```json
{
  "leaderboardRows": [
    {
      "ethAddress": "0x...",
      "accountValue": "1000000.00",
      "windowPerformances": [
        ["allTime", {
          "pnl": "500000.00",
          "roi": "1.0",
          "vlm": "10000000.00"
        }]
      ]
    }
  ]
}
```

### æ­¥éª¤ 2: ç­›é€‰å¤§æˆ·åœ°å€

```bash
python3 filter_top_traders.py
```

**è¾“å‡ºç¤ºä¾‹:**
```
================================================================================
æ­£æ”¶ç›Šå‰10åäº¤æ˜“è€… (æ—¶é—´çª—å£: allTime)
================================================================================

æ’å #1
  åœ°å€: 0x77c3ea550d2da44b120e55071f57a108f8dd5e45
  è´¦æˆ·ä»·å€¼: $71,676,909.60
  ç›ˆäº (PnL): $298,525,708.14
  æ”¶ç›Šç‡ (ROI): 126.61%
  äº¤æ˜“é‡: $193.33
...
```

**ç”Ÿæˆæ–‡ä»¶:**
- `top_traders_addresses.json` - åŒ…å«ç­›é€‰å‡ºçš„åœ°å€åˆ—è¡¨å’Œè¯¦ç»†ä¿¡æ¯

### æ­¥éª¤ 3: å¯åŠ¨ç›‘æ§

**åŸºç¡€ç‰ˆ:**
```bash
python3 monitor_whales.py
```

**é«˜çº§ç‰ˆï¼ˆæ¨èï¼‰:**
```bash
python3 monitor_whales_v2.py
```

**ç›‘æ§è¾“å‡ºç¤ºä¾‹:**
```
ğŸŸ¢ å¼€ä»“ | 2025-10-15T14:30:25.123456
   ç”¨æˆ·: 0x77c3ea55...8dd5e45
   å¸ç§: BTC
   æ–¹å‘: ä¹°å…¥
   æ•°é‡: 1.5
   ä»·æ ¼: $67,890.00
   ä»“ä½: 0.0000 â†’ 1.5000

ğŸ”´ å¹³ä»“ | 2025-10-15T14:35:12.654321
   ç”¨æˆ·: 0xfae95f60...c57e3571
   å¸ç§: ETH
   æ–¹å‘: å–å‡º
   æ•°é‡: 10.0
   ä»·æ ¼: $3,456.78
   ä»“ä½: 10.0000 â†’ 0.0000
   ğŸ’° å·²å®ç°ç›ˆäº: $12,345.67
```

---

## é…ç½®è¯´æ˜

### ç­›é€‰é…ç½®

ç¼–è¾‘ `filter_top_traders.py` åº•éƒ¨:

```python
# ä¿®æ”¹è¿™äº›å‚æ•°
addresses = get_top_traders(
    top_n=10,              # ç­›é€‰å‰10å
    time_window="allTime"  # æ—¶é—´çª—å£
)
```

**time_window é€‰é¡¹:**
- `"day"` - å½“æ—¥æ”¶ç›Š
- `"week"` - æœ¬å‘¨æ”¶ç›Š
- `"month"` - æœ¬æœˆæ”¶ç›Š
- `"allTime"` - å†å²æ€»æ”¶ç›Šï¼ˆæ¨èï¼‰

### ç›‘æ§é…ç½®

ç¼–è¾‘ `config.json`:

```json
{
  "filter": {
    "top_n": 10,
    "time_window": "allTime"
  },
  "monitor": {
    "max_addresses": 10,
    "notify_on_open": true,      // å¼€ä»“æ—¶é€šçŸ¥
    "notify_on_close": true,     // å¹³ä»“æ—¶é€šçŸ¥
    "notify_on_reverse": true,   // åå‘å¼€ä»“æ—¶é€šçŸ¥
    "notify_on_add": false,      // åŠ ä»“æ—¶é€šçŸ¥
    "notify_on_reduce": false,   // å‡ä»“æ—¶é€šçŸ¥
    "min_position_size": 0       // æœ€å°ä»“ä½é˜ˆå€¼
  },
  "notification": {
    "console": true,
    "log_file": "trades.log"
  }
}
```

---

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæœ€å¤šåªèƒ½ç›‘æ§ 10 ä¸ªåœ°å€ï¼Ÿ

**A:** Hyperliquid API é™åˆ¶æ¯ä¸ª IP åœ°å€æœ€å¤šè®¢é˜… 10 ä¸ªç”¨æˆ·çš„ userEventsã€‚

**è§£å†³æ–¹æ¡ˆ:**
- ä½¿ç”¨å¤šä¸ª IP åœ°å€ï¼ˆä»£ç†æ± ï¼‰
- éƒ¨ç½²åˆ°å¤šå°æœåŠ¡å™¨
- åˆ†æ‰¹è½®æ¢ç›‘æ§

### Q2: å¦‚ä½•æ›´æ–°æ’è¡Œæ¦œæ•°æ®ï¼Ÿ

**A:** 
```bash
# æ‰‹åŠ¨æ›´æ–°
curl -o leaderboard.json https://stats-data.hyperliquid.xyz/Mainnet/leaderboard

# æˆ–è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å°æ—¶ï¼‰
0 * * * * cd /path/to/project && curl -s -o leaderboard.json https://stats-data.hyperliquid.xyz/Mainnet/leaderboard
```

### Q3: ç›‘æ§ç¨‹åºæ„å¤–é€€å‡ºæ€ä¹ˆåŠï¼Ÿ

**A:** ä½¿ç”¨ `screen` æˆ– `nohup` ä¿æŒè¿è¡Œ:

```bash
# ä½¿ç”¨ screen
screen -S whale_monitor
python3 monitor_whales_v2.py
# Ctrl+A ç„¶å D é€€å‡ºï¼Œç¨‹åºç»§ç»­è¿è¡Œ

# ä½¿ç”¨ nohup
nohup python3 monitor_whales_v2.py > monitor.log 2>&1 &
```

### Q4: å¦‚ä½•æŸ¥çœ‹å†å²äº¤æ˜“è®°å½•ï¼Ÿ

**A:** æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶:
```bash
# å®æ—¶æŸ¥çœ‹
tail -f trades.log

# æœç´¢ç‰¹å®šåœ°å€çš„äº¤æ˜“
grep "0x1234..." trades.log

# ç»Ÿè®¡å¼€ä»“æ¬¡æ•°
grep "å¼€ä»“" trades.log | wc -l
```

### Q5: èƒ½å¦ç›‘æ§ç‰¹å®šå¸ç§çš„äº¤æ˜“ï¼Ÿ

**A:** ä¿®æ”¹ `monitor_whales_v2.py` ä¸­çš„ `_notify_trade` æ–¹æ³•ï¼Œæ·»åŠ å¸ç§è¿‡æ»¤:

```python
def _notify_trade(self, trade_info: Dict):
    # åªç›‘æ§ BTC å’Œ ETH
    if trade_info['coin'] not in ['BTC', 'ETH']:
        return
    # ... å…¶ä½™ä»£ç 
```

---

## é«˜çº§ç”¨æ³•

### 1. å¤šæ—¶é—´çª—å£å¯¹æ¯”

åˆ›å»ºè„šæœ¬ `compare_windows.py`:

```python
from filter_top_traders import get_top_traders

windows = ['day', 'week', 'month', 'allTime']

for window in windows:
    print(f"\n{'='*60}")
    print(f"æ—¶é—´çª—å£: {window}")
    print(f"{'='*60}")
    addresses = get_top_traders(top_n=5, time_window=window)
```

### 2. å¯¼å‡ºäº¤æ˜“æ•°æ®åˆ° CSV

ä¿®æ”¹ `monitor_whales_v2.py`ï¼Œåœ¨ `_notify_trade` æ–¹æ³•ä¸­æ·»åŠ :

```python
import csv

def _notify_trade(self, trade_info: Dict):
    # ä¿å­˜åˆ°CSV
    with open('trades.csv', 'a', newline='') as f:
        writer = csv.DictWriter(f, fieldnames=trade_info.keys())
        if f.tell() == 0:  # æ–‡ä»¶ä¸ºç©ºæ—¶å†™å…¥è¡¨å¤´
            writer.writeheader()
        writer.writerow(trade_info)
    # ... å…¶ä½™ä»£ç 
```

### 3. Telegram é€šçŸ¥é›†æˆ

å®‰è£…ä¾èµ–:
```bash
pip3 install python-telegram-bot
```

æ·»åŠ é€šçŸ¥å‡½æ•°:
```python
from telegram import Bot
import asyncio

async def send_telegram_notification(trade_info: Dict):
    bot = Bot(token='YOUR_BOT_TOKEN')
    chat_id = 'YOUR_CHAT_ID'
    
    message = f"""
ğŸ”” äº¤æ˜“é€šçŸ¥
è¡Œä¸º: {trade_info['action']}
å¸ç§: {trade_info['coin']}
æ–¹å‘: {trade_info['side']}
æ•°é‡: {trade_info['size']}
ä»·æ ¼: ${trade_info['price']:,.2f}
"""
    await bot.send_message(chat_id=chat_id, text=message)
```

### 4. æ•°æ®åº“å­˜å‚¨

ä½¿ç”¨ SQLite å­˜å‚¨äº¤æ˜“å†å²:

```python
import sqlite3

def init_database():
    conn = sqlite3.connect('trades.db')
    c = conn.cursor()
    c.execute('''
        CREATE TABLE IF NOT EXISTS trades (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            timestamp TEXT,
            user TEXT,
            coin TEXT,
            action TEXT,
            side TEXT,
            size REAL,
            price REAL,
            old_position REAL,
            new_position REAL,
            closed_pnl REAL
        )
    ''')
    conn.commit()
    conn.close()

def save_trade(trade_info: Dict):
    conn = sqlite3.connect('trades.db')
    c = conn.cursor()
    c.execute('''
        INSERT INTO trades (timestamp, user, coin, action, side, size, price, old_position, new_position, closed_pnl)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    ''', (
        trade_info['timestamp'],
        trade_info['user'],
        trade_info['coin'],
        trade_info['action'],
        trade_info['side'],
        trade_info['size'],
        trade_info['price'],
        trade_info['old_position'],
        trade_info['new_position'],
        trade_info['closed_pnl']
    ))
    conn.commit()
    conn.close()
```

---

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å†…å­˜ä¼˜åŒ–**: å®šæœŸæ¸…ç†å·²å¹³ä»“çš„æŒä»“è®°å½•
2. **ç½‘ç»œä¼˜åŒ–**: ä½¿ç”¨ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼Œè€ƒè™‘ä½¿ç”¨ VPS
3. **æ—¥å¿—ç®¡ç†**: å®šæœŸå½’æ¡£å’Œæ¸…ç†æ—¥å¿—æ–‡ä»¶
4. **ç›‘æ§ç›‘æ§**: æ·»åŠ ç¨‹åºå¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨é‡å¯æœºåˆ¶

---

## å®‰å…¨å»ºè®®

1. âš ï¸ ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç ä»»ä½•ç§é’¥æˆ–æ•æ„Ÿä¿¡æ¯
2. âš ï¸ æœ¬ç³»ç»Ÿä»…è¯»å–å…¬å¼€æ•°æ®ï¼Œä¸æ‰§è¡Œä»»ä½•äº¤æ˜“
3. âš ï¸ å®šæœŸæ›´æ–°ä¾èµ–åŒ…ä»¥ä¿®å¤å®‰å…¨æ¼æ´
4. âš ï¸ å¦¥å–„ä¿ç®¡é…ç½®æ–‡ä»¶ä¸­çš„ API å¯†é’¥

---

## æŠ€æœ¯æ”¯æŒ

- ğŸ“– è¯¦ç»†æŠ€æœ¯æ–¹æ¡ˆ: å‚è§ `guide.md`
- ğŸš€ å¿«é€Ÿå¼€å§‹: å‚è§ `QUICKSTART.md`
- ğŸ’¬ é—®é¢˜åé¦ˆ: æäº¤ Issue

---

## æ›´æ–°æ—¥å¿—

### v2.0 (2025-10-15)
- âœ… æ·»åŠ é…ç½®æ–‡ä»¶æ”¯æŒ
- âœ… ä¼˜åŒ–æ—¥å¿—è®°å½•
- âœ… æ”¹è¿›é”™è¯¯å¤„ç†
- âœ… æ·»åŠ æ¼”ç¤ºè„šæœ¬

### v1.0 (2025-10-15)
- âœ… åŸºç¡€åŠŸèƒ½å®ç°
- âœ… åœ°å€ç­›é€‰
- âœ… å®æ—¶ç›‘æ§
- âœ… æŒä»“è¿½è¸ª

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

